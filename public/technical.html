<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ephemera: Technical Architecture</title>
    <link rel="stylesheet" href="style.css">
    <script src="theme.js"></script>
</head>

<body>
    <div class="app-container">
        <header>
            <div class="header-row">
                <h1>Ephemera</h1>
                <button id="themeToggle" class="theme-toggle" aria-label="Toggle dark mode">
                    <span class="icon">üåì</span>
                </button>
            </div>
            <nav>
                <a href="/" class="link">Home</a> |
                <a href="/about.html" class="link">About</a> |
                <a href="/technical.html" class="link">Technical</a>
            </nav>
        </header>

        <main class="card">
            <h1>Ephemera: Technical Architecture</h1>

            <h2>1. System Overview</h2>
            <p>Ephemera is a Zero-Trust SSH Certificate Authority engineered to eliminate static credentials and replace
                them with short-lived, identity-bound certificates. It enables ‚ÄúJust-In-Time Access‚Äù by requiring
                real-time authentication before any certificate is issued.</p>

            <h3>Core Components</h3>
            <ul>
                <li>Python 3 (Flask) service</li>
                <li>OpenSSH-based certificate signing (ed25519)</li>
                <li>WebAuthn (FIDO2) authentication</li>
                <li>Docker-based deployment</li>
                <li>Tamper-evident local ledger for audit integrity</li>
            </ul>
            <p>Ephemera is designed as a fully self-contained security appliance that can run on any workstation or
                server without external dependencies.</p>

            <h2>2. Security Architecture</h2>
            <p>Ephemera follows a defense-in-depth identity model centered around strict credential lifecycle
                management.</p>

            <h3>2.1 Zero-Trust Access Model</h3>
            <p>Ephemera enforces:</p>
            <ul>
                <li><strong>Ephemeral Credentials</strong><br>All SSH certificates expire automatically after a short
                    TTL (5‚Äì60 minutes).</li>
                <li><strong>No long-lived private keys</strong><br>Developers do not store persistent SSH keys on disk
                    for server access.</li>
                <li><strong>Identity Binding</strong><br>Certificates include explicit principals based on the
                    authenticated user‚Äôs assigned role.</li>
            </ul>

            <h3>2.2 Certificate Authority (CA) Design</h3>
            <p>Ephemera contains a dedicated signing subsystem responsible for certificate issuance.</p>
            <ul>
                <li>The CA private key is stored in a locked-down directory with strict ownership and minimal read
                    privileges.</li>
                <li>The application never reads the private key into memory; signing is performed exclusively through
                    controlled OpenSSH subprocess calls.</li>
                <li>Identity verification (MFA, WebAuthn, SSO) is mandatory before certificate issuance.</li>
            </ul>
            <p>This ensures the CA is isolated, predictable, and resistant to misuse.</p>

            <h2>3. Cryptographic Audit Logging</h2>
            <p>Audit integrity is a first-class component of Ephemera.</p>

            <h3>3.1 Tamper-Evident Ledger</h3>
            <p>Ephemera maintains a Merkle-linked audit ledger stored locally.</p>
            <ul>
                <li>Each log entry contains a timestamp, event type, and hash linking it to the previous entry.</li>
                <li>Any modification to historical entries immediately breaks the cryptographic chain.</li>
                <li>The ledger is fully local and does not require cloud storage or external services.</li>
            </ul>
            <p>This ensures that all access events remain transparently verifiable.</p>

            <h3>3.2 Filesystem Reinforcement</h3>
            <p>The audit ledger is stored on an append-only file within the container.</p>
            <ul>
                <li>Overwrite attempts are blocked at the kernel level.</li>
                <li>Append operations remain allowed for real-time logging.</li>
                <li>A parallel Syslog stream mirrors every event to an isolated logging service for redundancy.</li>
            </ul>
            <p>This dual-path design guarantees reliable, high-integrity audit capture.</p>

            <h2>4. Authentication & Authorization</h2>
            <p>Ephemera supports modern authentication standards with layered protection.</p>

            <h3>4.1 Multi-Factor Authentication</h3>
            <ul>
                <li>Password authentication using PBKDF2-SHA256 hashing</li>
                <li>TOTP-based MFA</li>
                <li>WebAuthn (FIDO2) support for YubiKey, biometrics, and platform authenticators</li>
                <li>Optional SSO/OAuth sign-in via external identity providers</li>
            </ul>

            <h3>4.2 Role-Based Principal Assignment</h3>
            <p>Each user role maps to specific SSH principals:</p>
            <ul>
                <li><strong>admin</strong> ‚Üí root, admin, user</li>
                <li><strong>developer</strong> ‚Üí user</li>
                <li><strong>auditor</strong> ‚Üí read-only dashboard, no certificate privileges</li>
            </ul>
            <p>Roles ensure every certificate is bound to a well-defined permission boundary.</p>

            <h2>5. Deployment Topology</h2>
            <p>Ephemera is packaged as a containerized environment with three cooperating services:</p>

            <h3>A. Ephemera Core Service</h3>
            <ul>
                <li>Handles login, MFA, SSO, certificate signing, and ledger writing</li>
                <li>Runs the hardened CA subsystem</li>
                <li>Exposes a web UI and API for users and CLI tools</li>
            </ul>

            <h3>B. Reference SSH Target Service</h3>
            <ul>
                <li>A Linux OpenSSH instance configured to trust Ephemera‚Äôs CA</li>
                <li>Enables full end-to-end verification of certificate issuance and authentication</li>
                <li>Useful for local development, demos, and integration testing</li>
            </ul>

            <h3>C. Log Stream Service</h3>
            <ul>
                <li>Receives mirrored audit logs</li>
                <li>Provides isolation and redundancy for audit data</li>
                <li>Ensures no single component controls the logging pipeline</li>
            </ul>

            <h3>Cloud-Ready Extensions</h3>
            <p>Ephemera‚Äôs architecture supports optional integrations:</p>
            <ul>
                <li>External audit storage backends (e.g., S3-compatible object stores)</li>
                <li>External Key Management Systems (e.g., AWS KMS)</li>
                <li>Remote deployments using orchestrated infrastructure</li>
            </ul>
            <p>These adapters allow advanced environments to extend Ephemera‚Äôs trust model without altering the core
                system.</p>
        </main>
    </div>
</body>

</html>