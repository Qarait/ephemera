<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trust Budgeting — Ephemera</title>
    <meta name="description"
        content="Trust Budgeting is an experimental, opt-in governance primitive for limiting cumulative privileged authority at certificate issuance time.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/png" href="assets/images/favicon.png">
</head>

<body>
    <header>
        <div class="container">
            <a href="index.html" class="logo">Ephemera</a>
            <nav>
                <a href="index.html">Home</a>
                <a href="architecture.html">Architecture</a>
                <a href="threat-model.html">Threat Model</a>
                <a href="cli.html">CLI</a>
                <a href="disaster-recovery.html">Recovery</a>
                <a href="https://codeberg.org/Qarait1/ephemera" class="repo-btn">Repository (Codeberg)</a>
            </nav>
        </div>
    </header>

    <main>
        <div class="container">
            <h1>Trust Budgeting</h1>
            <p class="lead">Experimental. Opt-in. Governance primitive. May change or be removed.</p>

            <p>
                Trust Budgeting is a mechanism for limiting cumulative human authority during certificate issuance.
                It is <strong>not</strong> a security enforcement tool and does <strong>not</strong> provide
                runtime monitoring, attack detection, or access control.
            </p>

            <h2>Why Trust Budgeting Exists</h2>
            <p>
                In operational environments, privilege accumulation and operational fatigue can lead to excessive
                certificate issuance over time. Trust Budgeting provides an issuance-time accounting mechanism
                to limit this accumulation.
            </p>
            <ul>
                <li><strong>Operational Fatigue</strong> — Humans approve requests repeatedly without consideration for
                    cumulative impact.</li>
                <li><strong>Privilege Accumulation</strong> — Even well-intentioned users may accrue more access than
                    necessary over time.</li>
                <li><strong>Governance Gaps</strong> — Traditional RBAC policies enforce per-request limits but not
                    cumulative limits.</li>
            </ul>
            <p>
                Trust Budgeting addresses these gaps by tracking issuance costs against a finite budget.
                When the budget is exhausted, further issuance is paused until the budget resets.
            </p>

            <h2>How It Works</h2>
            <ol>
                <li><strong>Budget Allocation</strong> — Each user or group is assigned a budget (e.g., 100 points).
                </li>
                <li><strong>Cost Deduction</strong> — Each certificate issuance deducts a cost (e.g., 1 point) from the
                    budget.</li>
                <li><strong>Exhaustion Handling</strong> — When the budget is exhausted, certificate issuance fails with
                    a clear message.</li>
                <li><strong>Reset Cycle</strong> — Budgets can be configured to reset at a fixed interval (e.g., every
                    24 hours).</li>
            </ol>

            <h3>Issuance Flow</h3>
            <img src="../assets/diagrams/trust_budget_flow.png" alt="Trust Budget Issuance Flow Diagram"
                style="max-width: 100%; margin: 1rem 0;">
            <p>
                The diagram above shows the issuance-time decision flow:
            </p>
            <ul>
                <li>If no trust budget is defined in the policy, normal issuance proceeds.</li>
                <li>If a budget is defined, the ledger is consulted atomically.</li>
                <li>Sufficient balance results in cost deduction and certificate issuance.</li>
                <li>Insufficient balance results in a clear denial message.</li>
            </ul>

            <h2>Configuration</h2>
            <p>Trust Budgeting is configured in <code>policy.yaml</code> at the rule level:</p>
            <pre><code>policies:
  - name: Developer
    match:
      local_usernames: ["*"]
    principals: ["user"]
    max_duration: "15m"
    # Trust Budget (Experimental)
    trust_budget:
      budget_id: "user:${username}"  # Per-user budget
      cost: 1                        # Cost per issuance
      initial_balance: 100           # Starting balance
      reset_interval_hours: 24       # Optional reset interval</code></pre>
            <p>If <code>trust_budget</code> is <strong>not</strong> defined in a policy rule, the feature is completely
                disabled for that rule.</p>

            <h2>Relationship to Break-Glass</h2>
            <p>Trust Budgeting and Break-Glass are <strong>separate</strong>, <strong>parallel</strong> mechanisms:</p>
            <table style="width: 100%; border-collapse: collapse; margin: 1rem 0;">
                <tr style="border-bottom: 1px solid var(--border);">
                    <th style="text-align: left; padding: 0.5rem;">Feature</th>
                    <th style="text-align: left; padding: 0.5rem;">Purpose</th>
                </tr>
                <tr style="border-bottom: 1px solid var(--border);">
                    <td style="padding: 0.5rem;">Trust Budgeting</td>
                    <td style="padding: 0.5rem;">Limit cumulative issuance via accounting</td>
                </tr>
                <tr>
                    <td style="padding: 0.5rem;">Break-Glass</td>
                    <td style="padding: 0.5rem;">Emergency issuance path for out-of-policy access</td>
                </tr>
            </table>
            <p>Trust Budgeting does <strong>not</strong> block Break-Glass requests. Break-Glass is a separate issuance
                path with its own audit trail.</p>

            <h2>Limitations</h2>
            <ul>
                <li><strong>No runtime enforcement</strong> — Trust Budgeting only applies at issuance time.</li>
                <li><strong>No adaptive scoring</strong> — Costs are static and explicit.</li>
                <li><strong>No heuristics or ML</strong> — This is a mechanical, predictable accounting system.</li>
                <li><strong>No automatic resets without config</strong> — Reset intervals must be explicitly defined.
                </li>
            </ul>

            <h2>Audit Trail</h2>
            <p>All budget transactions are logged to the SQLite database (<code>server/data/trust_budget.db</code>) and
                can be queried for audit purposes.</p>

            <p style="margin-top: 2rem;"><a href="index.html"
                    style="color: var(--accent); text-decoration: underline;">← Back to Home</a></p>
        </div>
    </main>

    <footer>
        <div class="container">
            <span>Documentation applies to Ephemera v3.2.0 • Last Updated: 2026-01-01 • Architecture and
                threat model reflect current release.<br>
                Source code (canonical): Codeberg. GitHub mirror available for convenience. This documentation is
                hosted on GitHub Pages for availability.<br>
                <strong>Threat model and security assumptions are documented <a
                        href="https://codeberg.org/Qarait1/ephemera/src/branch/main/SECURITY_MODEL.md"
                        style="color: var(--accent); text-decoration: underline;">here</a>. Feedback and critique are
                    welcome.</strong></span>
            <a href="https://codeberg.org/Qarait1/ephemera">Codeberg</a>
        </div>
    </footer>
</body>

</html>